name: 部署测试环境
on:
  push:
    branches:
      - dev
  pull_request:
    branches:
      - master

jobs:
  build:

    runs-on: ubuntu-latest	

    steps:
    - uses: actions/checkout@v2.0.0
    - name: 下面开始跑部署环境👇
      run:
        yarn add
        yarn build
    - name: cos 配置
      env:
        APPID: 1256581102
        REGION: ap-shanghai
        BUCKET: blog-1256581102	
        SECRET_ID: ${{ secrets.TENCENTCLOUD_SECRET_ID }}
        SECRET_KEY: ${{ secrets.TENCENTCLOUD_SECRET_KEY }}
      run: coscmd config -a $SECRET_ID -s $SECRET_KEY -b $BUCKET -r $REGION	
    - name: 上传到 cos	
      run: coscmd upload -rs ./ / --ignore "./.git/*"
